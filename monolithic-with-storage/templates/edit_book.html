{% extends 'base.html' %}
{% block content %}
<div class="container mt-5">
    <h2 class="mb-4">Editar Libro</h2>

    <form method="POST" enctype="multipart/form-data">
        <div class="mb-3">
            <label for="title" class="form-label">Título:</label>
            <input type="text" class="form-control" id="title" name="title" value="{{ book.title }}" required>
        </div>
        <div class="mb-3">
            <label for="author" class="form-label">Autor:</label>
            <input type="text" class="form-control" id="author" name="author" value="{{ book.author }}" required>
        </div>
        <div class="mb-3">
            <label for="description" class="form-label">Descripción:</label>
            <textarea class="form-control" id="description" name="description" rows="3" required>{{ book.description }}</textarea>
        </div>
        <div class="mb-3">
            <label for="price" class="form-label">Precio:</label>
            <input type="number" step="0.01" class="form-control" id="price" name="price" value="{{ book.price }}" required>
        </div>
        <div class="mb-3">
            <label for="stock" class="form-label">Stock:</label>
            <input type="number" class="form-control" id="stock" name="stock" value="{{ book.stock }}" required>
        </div>
        <div class="mb-3">
            <label for="image" class="form-label">Imagen del Libro:</label>
            {% if book.image_path %}
            <div class="mb-2">
                <img src="{{ url_for('book.serve_image', filename=book.image_path.split('/')[-1]) }}" alt="Current book image" class="img-thumbnail" style="max-width: 200px;">
                <p class="text-muted">Imagen actual</p>
            </div>
            {% endif %}
            <input type="file" class="form-control" id="image" name="image" accept="image/*">
            <small class="form-text text-muted">Sube una nueva imagen para reemplazar la actual. Formatos soportados: PNG, JPG, JPEG, GIF. Tamaño máximo: 5MB</small>
        </div>
        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
        <a href="{{ url_for('book.catalog') }}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{% endblock %}
